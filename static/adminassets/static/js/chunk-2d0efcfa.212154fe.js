(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0efcfa"],{"9a62":function(e,l,t){"use strict";t.r(l);var a=t("b0af"),s=t("99d9"),i=t("62ad"),o=t("0fd9"),r=function(){var e=this,l=e._self._c;return l(a["a"],[e.loading?e._e():l(s["b"],[l(o["a"],[l(i["a"],{staticClass:"text-center mx-auto",attrs:{cols:8}},[l("employee-table")],1)],1)],1)],1)},n=[],d=t("8336"),m=t("a523"),c=t("8fea"),u=t("169a"),f=t("ce7e"),h=t("132d"),p=t("2fa4"),b=t("71d9"),_=t("2a7f"),v=function(){var e=this,l=e._self._c;return l(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.itemsList},scopedSlots:e._u([{key:"top",fn:function(){return[l(b["a"],{attrs:{flat:""}},[l(_["b"],[e._v("My Employees")]),l(f["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),l(p["a"]),l(u["a"],{scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:a}){return[l(d["a"],e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",a,!1),t),[e._v(" Add Employee ")])]}}]),model:{value:e.dialog,callback:function(l){e.dialog=l},expression:"dialog"}},[l(a["a"],[l(s["c"],[l("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),l(s["b"],[l(m["a"],[l("EmployeeForm",{ref:"form",attrs:{touseModel:e.editedItem,isAdd:e.isadd}})],1)],1),l(s["a"],[l(p["a"]),l(d["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),l(d["a"],{attrs:{color:"blue darken-1",text:"",loading:e.loading},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),l(u["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(l){e.dialogDelete=l},expression:"dialogDelete"}},[l(a["a"],[l(s["c"],{staticClass:"text-h5"},[e._v("Are you sure you want to delete this employee?")]),l(s["a"],[l(p["a"]),l(d["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),l(d["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),l(p["a"])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:t}){return[l(h["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(l){return e.editItem(t)}}},[e._v(" mdi-pencil ")]),l(h["a"],{attrs:{small:""},on:{click:function(l){return e.deleteItem(t)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[l(d["a"],{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}])})},x=[],g=t("2f62"),y=t("2e4b"),k=t("4bd4"),M=t("e449"),I=t("b974"),E=t("8654"),w=function(){var e=this,l=e._self._c;return l(a["a"],{staticClass:"mx-auto"},[l(s["c"],[e._v(e._s(e.formTitle))]),l(f["a"]),l(s["b"],[e.useSelect?l(o["a"],[l(i["a"],{attrs:{xl:10,lg:10,md:10,sm:12,xs:12}},[l(I["a"],{attrs:{outlined:"",label:"Choose Employee",placeholder:"Choose Employee",items:this.allemployees,"item-text":e=>e.first_name+" - "+e.last_name,"item-value":"id","return-object":""},on:{change:function(l){return e.handleSelected(e.select)}},model:{value:e.select,callback:function(l){e.select=l},expression:"select"}})],1)],1):e._e()],1),l(s["b"],[l(k["a"],{ref:"form",model:{value:e.valid,callback:function(l){e.valid=l},expression:"valid"}},[l(o["a"],[l(i["a"],{attrs:{cols:12,md:4,lg:4,xl:4,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.firstname.label,placeholder:e.form.firstname.placeholder,required:"",rules:e.form.firstname.rules},model:{value:e.formModel.first_name,callback:function(l){e.$set(e.formModel,"first_name",l)},expression:"formModel.first_name"}})],1),l(i["a"],{attrs:{cols:12,md:4,lg:4,xl:4,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.middlename.label,placeholder:e.form.middlename.placeholder},model:{value:e.formModel.middle_name,callback:function(l){e.$set(e.formModel,"middle_name",l)},expression:"formModel.middle_name"}})],1),l(i["a"],{attrs:{cols:12,md:4,lg:4,xl:4,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.lastname.label,placeholder:e.form.lastname.placeholder,required:"",rules:e.form.lastname.rules},model:{value:e.formModel.last_name,callback:function(l){e.$set(e.formModel,"last_name",l)},expression:"formModel.last_name"}})],1),l(i["a"],{attrs:{cols:10}},[l("div",[l(M["a"],{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:t,attrs:a}){return[l(E["a"],e._g(e._b({attrs:{label:"Birthday date","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:e.form.lastname.rules},model:{value:e.formModel.date_of_birth,callback:function(l){e.$set(e.formModel,"date_of_birth",l)},expression:"formModel.date_of_birth"}},"v-text-field",a,!1),t))]}}]),model:{value:e.formModel.menu,callback:function(l){e.$set(e.formModel,"menu",l)},expression:"formModel.menu"}},[l(y["a"],{attrs:{"active-picker":e.formModel.activePicker,max:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),min:"1950-01-01"},on:{"update:activePicker":function(l){return e.$set(e.formModel,"activePicker",l)},"update:active-picker":function(l){return e.$set(e.formModel,"activePicker",l)},change:e.save},model:{value:e.formModel.date_of_birth,callback:function(l){e.$set(e.formModel,"date_of_birth",l)},expression:"formModel.date_of_birth"}})],1)],1)]),l(i["a"],{attrs:{cols:12,md:6,lg:6,xl:6,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.email.label,placeholder:e.form.email.placeholder,"append-icon":e.form.email.icon,required:"",rules:e.form.email.rules},model:{value:e.formModel.email,callback:function(l){e.$set(e.formModel,"email",l)},expression:"formModel.email"}})],1),l(i["a"],{attrs:{cols:12,md:6,lg:6,xl:6,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.phone.label,placeholder:e.form.phone.placeholder,required:"",rules:e.form.phone.rules,"append-icon":e.form.phone.icon},model:{value:e.formModel.phone_number,callback:function(l){e.$set(e.formModel,"phone_number",l)},expression:"formModel.phone_number"}})],1),l(i["a"],{attrs:{cols:12,md:6,lg:6,xl:6,sm:12,xs:12}},[l(I["a"],{attrs:{outlined:"",label:e.form.licensestate.label,placeholder:e.form.licensestate.placeholder,rules:e.form.licensestate.rules,items:e.states,required:""},model:{value:e.formModel.license_state,callback:function(l){e.$set(e.formModel,"license_state",l)},expression:"formModel.license_state"}})],1),l(i["a"],{attrs:{cols:12,md:6,lg:6,xl:6,sm:12,xs:12}},[l(E["a"],{attrs:{outlined:"",label:e.form.licensenumber.label,placeholder:e.form.licensenumber.placeholder,required:"",rules:e.form.licensenumber.rules,"append-icon":e.form.licensenumber.icon},model:{value:e.formModel.license_number,callback:function(l){e.$set(e.formModel,"license_number",l)},expression:"formModel.license_number"}})],1)],1)],1)],1)],1)},$=[],q=t("10b8"),T={props:{touseModel:{required:!0},isAdd:{required:!0},selected:{required:!1}},data:()=>({genders:["male","female","other"],states:["OH","PA","MI"],valid:!0,loading:!1,cardTypes:[{value:"visa",text:"Visa Express"},{value:"master",text:"Mastard"}],defaultModel:{email:null,phone:null,first_name:"New",last_name:"Employee",middle_name:null,gender:"male",picker:null,activePicker:null,date_of_birth:null,menu:!1,license_state:null,license_number:null},select:null,form:{username:{label:"Username",placeholder:"Tookit",rules:[e=>!!e||"This field is required"]},card_type:{label:"Card type",placeholder:"Mater",rules:[e=>!!e||"This field is required"]},password:{label:"Password",placeholder:"xxx",rules:[e=>!!e||"This field is required"]},email:{label:"Email",placeholder:"wangqiangshen@gmail.com",icon:"mdi-email",rules:[e=>!!e||"This field is required",e=>q["a"].test(e)||"Invalid email"]},phone:{label:"phone",placeholder:"18682157492",icon:"mdi-phone",rules:[e=>!!e||"This field is required"]},firstname:{label:"Firstname",placeholder:"Firstname",rules:[e=>!!e||"This field is required"]},lastname:{label:"Lastname",placeholder:"Lastname",rules:[e=>!!e||"This field is required"]},middlename:{label:"Middlename",placeholder:"Middlename",rules:[e=>!!e||"This field is required"]},gender:{label:"Employee Selector",placeholder:"gender",rules:[e=>!!e||"This field is required"]},licensestate:{label:"LicenseState",placeholder:"Select State",rules:[e=>!!e||"This field is required"]},licensenumber:{label:"License Number",placeholder:"OH8894443",rules:[e=>!!e||"This field is required"]}},formHasErrors:!1,locobj:{}}),computed:{...Object(g["c"])(["getAllEmployees","getAuthSet"]),formTitle(){return"Employee form User"},formModel:{get(){return this.touseModel},set(e){this.touseModel=e}},allemployees(){return this.getAllEmployees},useSelect(){return this.getAuthSet&&!this.isAdd}},watch:{menu(e){e&&setTimeout(()=>this.activePicker="YEAR")}},created(){this.setupEmployee()},methods:{save(e){this.$refs.menu.save(e)},async setupEmployee(){this.useSelect&&(this.selected?await this.$store.dispatch("LoadEmployees").finally(()=>{var e=this.allemployees.find(e=>e.email===this.selected);this.allemployees.unshift(this.defaultModel),this.handleSelected(e)}):await this.$store.dispatch("LoadEmployees").finally(()=>{this.allemployees.unshift(this.defaultModel)}))},handleSelected(e){this.formModel=Object.assign({},e)}}},S=T,O=t("2877"),C=Object(O["a"])(S,w,$,!1,null,null,null),A=C.exports,D={data:()=>({dialog:!1,dialogDelete:!1,loading:!1,isadd:!0,components:{EmployeeForm:A},headers:[{text:"First Name",align:"start",sortable:!1,value:"first_name"},{text:"Last Name",value:"last_name"},{text:"Email",value:"email"},{text:"Phone Number",value:"phone_number"},{text:"Active",value:"is_active"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,formModel:{email:null,phone:null,first_name:null,last_name:null,middle_name:null,gender:"male",picker:null,activePicker:null,date_of_birth:null,menu:!1,license_state:null,license_number:null},editedItem:{email:null,phone:null,first_name:null,last_name:null,middle_name:null,gender:"male",picker:null,activePicker:null,date_of_birth:null,menu:!1,license_state:null,license_number:null},defaultItem:{email:null,phone:null,first_name:null,last_name:null,middle_name:null,gender:"male",picker:null,activePicker:null,date_of_birth:null,menu:!1,license_state:null,license_number:null}}),computed:{...Object(g["c"])(["getAllEmployees"]),itemsList:{get(){return this.getAllEmployees}},formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},isNew(){return-1===this.editedIndex}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){this.initialize()},mounted(){console.log(this.itemsList)},methods:{initialize(){this.desserts=[]},editItem(e){this.editedIndex=this.itemsList.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},async deleteItemConfirm(){console.log("deleting.........",this.editedItem.id),await this.$store.dispatch("DeleteEmployee",this.editedItem.id),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){if(this.$refs.form.$refs.form.validate())if(this.loading=!0,console.log(this.formModel),this.isNew)this.loading=!0,console.log("sending new"),await this.$store.dispatch("CreateEmployee",this.editedItem).finally(()=>{this.loading=!1}),this.close();else{console.log("sending update");var e=this.itemsList[this.editedIndex];console.log(e),console.log(this.editedItem);let l={};l.id=e.id,l.data=this.editedItem,await this.$store.dispatch("UpdateEmployee",l).finally(()=>{this.loading=!1}),this.close()}}},components:{EmployeeForm:A}},L=D,j=Object(O["a"])(L,v,x,!1,null,null,null),P=j.exports,N={components:{EmployeeTable:P},data(){return{loading:!0}},async mounted(){await this.$store.dispatch("LoadEmployees").finally(()=>{this.loading=!1})}},F=N,z=Object(O["a"])(F,r,n,!1,null,null,null);l["default"]=z.exports}}]);